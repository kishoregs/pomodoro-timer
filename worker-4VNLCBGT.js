var e=null,n=0,a;function r(){let t=Date.now(),i=Math.round((t-a)/1e3),s=n-i;if(s<=0)postMessage({event:"tick",remaining:0}),e&&(clearTimeout(e),e=null);else{postMessage({event:"tick",remaining:s});let o=1e3-t%1e3;e=setTimeout(r,o)}}addEventListener("message",({data:t})=>{switch(t.command){case"start":if(e)break;n=t.remaining,a=Date.now(),r();break;case"pause":if(e){clearTimeout(e),e=null;let i=Date.now(),s=Math.round((i-a)/1e3);n=n-s,postMessage({event:"paused",remaining:n})}break;case"reset":e&&(clearTimeout(e),e=null),n=t.remaining,postMessage({event:"reset",remaining:n});break;case"add_time":e&&(n+=t.time);break}});
